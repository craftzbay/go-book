# Өгөгдлийн бүтэн байдал

Өгөгдлийг дамжуулах, хадгалах явцад  дамжуулалтын алдаа гарах эсвэл зориуд хэн нэгэн гар хүрч өөрчлөх зэргээр бүрэн бүтэн байдал нь алдагдах тохиолдол гардаг. Үүний шалгахын тулд ихэвчлэн анхны бүтэн өгөгдөл дээр тооцоолол хийж нэмэлт шалгалтын тоо гаргаж авдаг. Энэ тоог _хайш_ \(hash\) гэж нэрлэдэг, харин тоог гаргаж авах процессыг хайшлэх гэж нэрлэдэг. Хүлээн авагч өгөгдөл бүрэн эсэхийг шалгахдаа ирсэн өгөгдлийг дахин хайшлэнэ, үүссэн хайш тоог анхны хайштай тулган шалгана.

Хамгийн энгийн хайшлэх алгоритм бол өгөгдлийн байтуудыг хооронд нь нэмэх арга юм. Гэхдээ энэ арга нь өгөгдлийн утга өөрчлөгдөхийг мэдэх боломжгүй, жишээлбэл хакер өгөгдлийн хоёр байтыг хооронд нь сольж болно. Энэ үед хайш нь адил байх боловч өгөгдлийн дараалал өөрчлөгдсөн байна. Жишээлбэл $256-н оронд $65,536 болгон сольсон байх боломжтой.

Тэгэхээр хамгаалалт, нууцлалын зориулалтаар ашиглагдах хайшлэх алгоритм маш сайн байх ёстой, сайн гэдэг нь өгөгдлийг өөрчлөөд ижил хайш код үүсгэх боломжгүй байх ёстой. Нууцлалын мэргэжилтнүүд хайш алгоритмуудыг үргэлж шалгаж байдаг, халдлага хийх зорилгоор өгөгдлийг өөрчлөх боломж байгаа эсэхийг тэд судалж шалгадаг.

Go хэл нь MD4, MD5, RIPEMD-160, SHA1, SHA224, SHA256, SHA384, SHA512 зэрэг хайшлэх алгоритмуудыг дэмждэг. Бүгдээрээ хэрэглэх талаараа төстэй:  New\(\) функцийг дуудаж хайш обект үүсгэнэ. Хайш обект нь `io.Writer` интерфэйстэй бөгөөд өгөгдөлөө ийш нь бичих замаар хайшлэнэ. Хайш дэх байтын тоог `Size()`, хайш утгыг `Sum()` функцүүдээр мэдэж болно.

Энгийн хайшлэх алгоритмуудын нэг нь MD5 юм, үүнд зориулсан `md5` нэртэй пакет бий. Хайш утга нь 16 байтын массив байдаг. Үүнийг арван-зургаатын хэлбэрт дүрсэлж харуулдаг.

```go
//  MD5Hash.go
package main

import (
        "crypto/md5"
        "fmt"
)

func main() {
        hash := md5.New() // хайш обект үүсгэж байна

        bytes := []byte("hello\n")
        hash.Write(bytes) // өгөгдлийг бичиж байна

        hashValue := hash.Sum(nil)
        hashSize := hash.Size()

        // үүссэн hashValue утгыг арван-зургаатаар дүрсэлж байна
        for n := 0; n < hashSize; n += 4 {
                var val uint32
                val = uint32(hashValue[n])<<24 +
                        uint32(hashValue[n+1])<<16 +
                        uint32(hashValue[n+2])<<8 +
                        uint32(hashValue[n+3])
                fmt.Printf("%x ", val)
        }
        fmt.Println()
}
```

Програмаас хэвлэгдэх хайш утга нь  "b1946ac9 2492d234 7c6235b4 d2611184" байна.

MD5 алгоритм дээр түлхүүр нэмж бага зэрэг өөрчилсөн шинэ алгоритм бий, түүнийг HMAC \(Keyed-Hash Message Authentication Code\) гэж нэрлэдэг. Энэ хайшлэгчийг үүсгэхийн тулд арай өөр байгуулагч функц дуудна.

```go
func NewMD5(key []byte) hash.Hash
```



